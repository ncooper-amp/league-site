<%- include header.ejs %>
<%- include nav.ejs %>


<% if (error) { %>
<p>Something seems to have gone wrong</p>
<p>
  <%= error %>
</p>
<% }
  else { %>
<div class="table-responsive">
  <table class="table">
    <thead>
      <tr>
        <th>
          <%= division %>
        </th>
        <th>p</th>
        <th>w</th>
        <th>l</th>
        <th>avg</th>
      </tr>
    </thead>
    <tbody>
      <% result.forEach(function(row){
            var n = (row['pointsFor'] / row['played']);
            if(Number.isNaN(n)){
              var n = 0;
            }
            else{
              if (!(Number.isInteger(n))){
                n = n.toFixed(1);
              }
            }

            %>
      <tr>
        <td>
          <%= row['name'] %>
        </td>
        <td>
          <%= row['played'] %>
        </td>
        <td>
          <%= row['pointsFor'] %>
        </td>
        <td>
          <%= row['pointsAgainst'] %>
        </td>
        <td>
          <%= n %>
        </td>
      </tr>
      <% }) %>
    </tbody>
  </table>
</div>
<% } %>
<%- include footer.ejs %>


</body>

</html>